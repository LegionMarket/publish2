!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function t(i,n){this.$element=e(i),this.options=e.extend({},t.DEFAULTS,e.isPlainObject(n)&&n),this.init()}var i=e(document),n="qor.publish2",s="enable."+n,r="disable."+n,o="click."+n,a="change."+n,d=".qor-publish2__version",c="qor-table__inner-list",l="qor-table__inner-block",u="."+c,h="."+l,f='[name="QorResource.PublishReady"]',b='[name="QorResource.ScheduledStartAt"]',p='[name="QorResource.ScheduledEndAt"]',v=".qor-pulish2__action-input",y=".qor-table--medialibrary>tbody>tr",g="qor-table--medialibrary",m="is-showing";return t.prototype={constructor:t,init:function(){this.actionType={scheduledstart:b,scheduledend:p,publishready:f},this.bind()},bind:function(){i.on(o,d,this.loadPublishVersion.bind(this)).on(a,v,this.action.bind(this))},unbind:function(){i.off(o,d,this.loadPublishVersion.bind(this)).off(a,v,this.action.bind(this))},action:function(t){var i=e(t.target),n="checkbox"==i.prop("type"),s=i.val(),r=e(this.actionType[i.data().actionType]),o=r.closest("label");r.size()&&(n?(r.prop("checked",i.is(":checked")),i.is(":checked")?o.addClass("is-checked"):o.removeClass("is-checked")):r.val(s))},loadPublishVersion:function(t){var i,n=e(t.target),s=n.data().versionUrl,r=n.closest("table"),o=n.closest("tr"),a=o.find("td").size(),d=r.hasClass(g),f=e('<tr class="'+c+'"><td colspan="'+a+'"></td></tr>'),b=e('<div class="'+l+'"><div style="text-align: center;"><div class="mdl-spinner mdl-js-spinner is-active"></div></div></div>');if(e(u).remove(),r.find("tr").removeClass(m),o.addClass(m),d){var p=e(y),v=parseInt(r.width()/217),q=p.index(o)+1,_=Math.ceil(q/v);o=e(p.get(v*_-1)),f=e('<tr class="'+c+'" style="width: '+(217*v-16)+'px"><td></td></tr>')}return o.after(f),i=e(u).find("td"),b.appendTo(i).trigger("enable"),s&&e.get(s,function(t){e(h).html(t).trigger("enable")}),!1},destroy:function(){this.unbind(),this.$element.removeData(n)}},e.fn.qorSliderAfterShow.initPublishForm=function(){if(e(".qor-pulish2__action").size())for(var t=[b,p,f],i=0;i<t.length;i++)e(t[i]).closest(".qor-form-section").hide()},t.DEFAULTS={},t.plugin=function(i){return this.each(function(){var s,r=e(this),o=r.data(n);if(!o){if(/destroy/.test(i))return;r.data(n,o=new t(this,i))}"string"==typeof i&&e.isFunction(s=o[i])&&s.apply(o)})},e(function(){var i=".qor-theme-publish2";e(document).on(r,function(n){t.plugin.call(e(i,n.target),"destroy")}).on(s,function(n){t.plugin.call(e(i,n.target))}).triggerHandler(s)}),t});